function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}import{fetchProducts}from"./api.js";var mainContentProducts,textLinks=["продукты","цвета","вдохновение","советы","найти магазин"],slideSideWords=["главная","продукты","краски"],sidebarSliderWords=["новинки","есть в наличии","контрактные","эксклюзивные","распродажа"],Icons=[{label:"Поиск",src:"assets/img/search.svg",alt:"search"},{label:"Профиль",src:"assets/img/profile.svg",alt:"profile"},{label:"Избранное",src:"assets/img/heart.svg",alt:"heart"}],sliderImages=[{src:"assets/img/Rectangle 645.webp",alt:"slide"},{src:"assets/img/Rectangle 645.webp",alt:"slide"},{src:"assets/img/Rectangle 645.webp",alt:"slide"},{src:"assets/img/Rectangle 645.webp",alt:"slide"},{src:"assets/img/Rectangle 645.webp",alt:"slide"},{src:"assets/img/Rectangle 645.webp",alt:"slide"}],sliderButtons=[{src:"assets/img/chevron-left.svg",alt:"leftArrow"},{src:"assets/img/chevron-right.svg",alt:"rightArrow"}],dots=[{src:"./assets/img/Ellipse 264.svg",alt:"dot"}],modalOptionsData=[{text:"сначала дорогие",sortValue:"highPriceFirst"},{text:"сначала недорогие",sortValue:"lowPriceFirst"},{text:"сначала популярные",sortValue:"popularFirst"},{text:"сначала новые",sortValue:"newFirst"}],cartItemsData=[],_mainSection$openModa={mainSection:document.querySelector(".mainSection"),openModalButton:document.getElementById("sortTextButton"),modal:document.getElementById("modal"),modalOptions:document.getElementById("modalOptions"),modalBackground:document.getElementById("modalBackground"),cart:document.getElementById("cart"),sidebar:document.querySelector(".sidebar"),renderCartContentItems:document.getElementById("cartContentItems")},mainSection=_mainSection$openModa.mainSection,openModalButton=_mainSection$openModa.openModalButton,modal=_mainSection$openModa.modal,modalOptions=_mainSection$openModa.modalOptions,modalBackground=_mainSection$openModa.modalBackground,cart=_mainSection$openModa.cart,sidebar=_mainSection$openModa.sidebar,renderCartContentItems=_mainSection$openModa.renderCartContentItems;fetchProducts().then((function(t){renderMainContent(mainContentProducts=t)})),document.querySelector(".textLinks").innerHTML=textLinks.map((function(t){return'<li>\n      <a href="#">'.concat(t,"</a>\n    </li>")})).join(""),document.querySelector(".iconLinks").innerHTML=Icons.map((function(t){return'<li>\n\t\t\t<img aria-label="'.concat(t.label,'"\n\t\t\t\tsrc="').concat(t.src,'"\n\t\t\t\talt="').concat(t.alt,'" />\n\t\t\t</li>')})).join(""),document.querySelector(".slider").innerHTML=sliderImages.map((function(t){return'<img class="sliderSlide" src="'.concat(t.src,'" alt="').concat(t.alt,'" />')})).join(""),document.querySelector(".arrowContainer").innerHTML=sliderButtons.map((function(t){return'<button class="sliderButton"><img class="slide" src="'.concat(t.src,'" alt="').concat(t.alt,'" /></button>')})).join("");var sortValue,currentSlide=0;function updateDots(){document.querySelectorAll(".dot").forEach((function(t,e){t.classList.toggle("active",e===currentSlide)}))}function showSlide(t){var e=document.querySelectorAll(".sliderSlide").length;t<0&&(t=e-1),t>=e&&(t=0),document.querySelector(".slider").style.transform="translateX(-".concat(100*t,"%)"),currentSlide=t,updateDots()}function renderMainContent(t){mainSection.innerHTML=t.map((function(t){return'<div class="productCartContainer">\n\t\t\t<div class="productCart" data-id="'.concat(t.id,'" data-quantity="').concat(t.quantity,'">\n\t\t\t\t<div class="productImageContainer">\n\t\t\t\t\t<img class="productImage" src="').concat(t.image,'" alt="').concat(t.name,'" />\n\t\t\t\t</div>\n\t\t\t\t<div class="productInfo">\n\t\t\t\t\t<h3 class="productName">').concat(t.name,'</h3>\n\t\t\t\t\t<div class="priceAndButton">\n\t\t\t\t\t\t<p class="productPrice">').concat(t.price,' ₽</p>\n\t\t\t\t\t\t<button class="addProduct">\n\t\t\t\t\t\t\t<img src="assets/img/plus.svg" alt="plus"/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})).join("")}function modalHandler(t,e){"open"===t?[modal,modalBackground].forEach((function(t){return t.classList.add("open")})):"close"===t&&(e&&(sortValue=e.target.getAttribute("data-sortValue"),optionName=e.target.textContent,sort(sortValue,optionName)),[modal,modalBackground,cart,sidebar].forEach((function(t){t.classList.remove("open")})))}function sort(t,e){renderMainContent(_toConsumableArray(mainContentProducts).sort((function(e,n){return"highPriceFirst"===t?n.price-e.price:e.price-n.price}))),openModalButton.innerHTML="".concat(e,'<img src="assets/img/Frame 10.svg" />')}function cartFunction(){totalCardItemsQuantity(),totalCartAmount(),renderCartContentItems.innerHTML=cartItemsData.map((function(t){var e=1==t.quantity&&"disabled";return'<li class="cartItem" data-id="'.concat(t.id,'">\n\t\t\t\t<img class="cartItemImage" src="').concat(t.image,'" alt="item" />\n\t\t\t\t<div class="cartItemInfo">\n\t\t\t\t\t<p class="cartItemName">').concat(t.name,'</p>\n\t\t\t\t\t<p class="cartItemPrice">').concat(t.price,'</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="cartItemCount">\n\t\t\t\t\t<button class="cartItemCountMinus ').concat(e,'">\n\t\t\t\t\t\t<img src="assets/img/minus.svg" alt="minus" />\n\t\t\t\t\t</button>\n\t\t\t\t\t<p class="cartItemCountQuantity">').concat(t.quantity,'</p>\n\t\t\t\t\t<button class="cartItemCountPlus">\n\t\t\t\t\t\t<img src="assets/img/plus.svg" alt="plus" />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<button class="cartItemDelete">\n\t\t\t\t\t<img src="assets/img/x.svg" alt="delete" />\n\t\t\t\t</button>\n\t\t\t</li>')})).join("")}function updateProductQuantity(t,e){var n=cartItemsData.find((function(e){return e.id===t}));if(n){var a=parseInt(n.quantity)+parseInt(e);n.quantity=a>0?a.toString():"1"}}function totalCardItemsQuantity(){var t,e,n=cartItemsData.reduce((function(t,e){return parseInt(t)+parseInt(e.quantity)}),0);document.getElementById("itemsCount").innerText="".concat(t=n,1==(e=t%10)&&11!==t?" товар":e>=2&&e<=4&&(t<10||t>20)?" товара":" товаров"),document.getElementById("openCart").innerText=n,document.getElementById("openCartMobile").innerText=n}function totalCartAmount(){var t=cartItemsData.reduce((function(t,e){return t+parseFloat(e.price)*parseInt(e.quantity)}),0),e=new Intl.NumberFormat("ru-RU").format(t);document.getElementById("cartTotalPrice").innerText="".concat(e," ₽")}document.querySelector(".arrowContainer .sliderButton:nth-child(1)").addEventListener("click",(function(){showSlide(currentSlide-1)})),document.querySelector(".arrowContainer .sliderButton:nth-child(2)").addEventListener("click",(function(){showSlide(currentSlide+1)})),document.querySelector(".pagination").innerHTML=sliderImages.map((function(t,e){return'<img class="dot '.concat(e===currentSlide&&"active",'" src="').concat(dots[0].src,'" alt="dot" />')})).join(""),document.querySelector(".slideSideText").innerHTML=slideSideWords.map((function(t,e){return"<span>".concat(t,"</span> ").concat(e<slideSideWords.length-1?'<img src="assets/img/Ellipse 264.svg"/>':"")})).join(""),document.querySelector(".sidebarToggleContent").innerHTML=sidebarSliderWords.map((function(t,e){return'<div class="sidebarSliderItem">\n\t\t\t\t<input type="checkbox" id="toggle'.concat(e,'" class="toggle"/>\n\t\t\t\t<label for="toggle').concat(e,'"><span class="toggleWord">').concat(t,"</span></label>\n\t\t\t</div>")})).join(""),modalOptions.innerHTML=modalOptionsData.map((function(t){return'<li class="modalOption" data-sortValue="'.concat(t.sortValue,'">').concat(t.text,"</li>")})).join(""),openModalButton.addEventListener("click",(function(){return modalHandler("open")})),modalOptions.addEventListener("click",(function(t){return modalHandler("close",t)})),modalBackground.addEventListener("click",(function(){return modalHandler("close")})),document.getElementById("openCart").addEventListener("click",(function(){[cart,modalBackground].forEach((function(t){t.classList.add("open")}))})),document.getElementById("openCartMobile").addEventListener("click",(function(){cart.classList.add("openMobile"),modalBackground.classList.add("open"),document.documentElement.style.overflow="hidden"})),document.getElementById("closeCartButton").addEventListener("click",(function(){[cart,modalBackground].forEach((function(t){t.classList.remove("open","openMobile")})),document.documentElement.style.overflow="auto"})),renderCartContentItems.addEventListener("click",(function(t){var e=t.target.closest(".cartItemDelete"),n=t.target.closest(".cartItem").dataset.id;if(t.target.closest(".cartItemCountMinus"))updateProductQuantity(n,-1);else if(t.target.closest(".cartItemCountPlus"))updateProductQuantity(n,1);else if(e){var a=cartItemsData.findIndex((function(t){return t.id===n}));e&&-1!==a&&cartItemsData.splice(a,1)}cartFunction()})),mainSection.addEventListener("click",(function(t){var e=t.target.closest(".addProduct");if(e){var n=e.closest(".productCart"),a=n.dataset.id,r=parseInt(n.dataset.quantity),o=n.querySelector(".productName").textContent,c=n.querySelector(".productPrice").textContent,i=n.querySelector(".productImage").src;if(cartItemsData.find((function(t){return t.id===a})))updateProductQuantity(a,r);else{var s={id:a,name:o,price:c,image:i,quantity:r.toString()};cartItemsData.push(s)}cartFunction()}})),document.getElementById("itemsCountDelete").addEventListener("click",(function(){cartItemsData=[],cartFunction()})),document.querySelector(".burgerMenu").addEventListener("click",(function(){[sidebar,modalBackground].forEach((function(t){t.classList.add("open")}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".sideTextMobile").innerHTML=slideSideWords.map((function(t,e){return"<span>".concat(t,"</span> ").concat(e<slideSideWords.length-1?'<img src="assets/img/Ellipse 47.svg"/>':"")})).join("")}));