(()=>{const t=["главная","продукты","краски"],e=[{src:"assets/img/Rectangle 645.png",alt:"slide"},{src:"assets/img/Rectangle 645.png",alt:"slide"},{src:"assets/img/Rectangle 645.png",alt:"slide"},{src:"assets/img/Rectangle 645.png",alt:"slide"},{src:"assets/img/Rectangle 645.png",alt:"slide"},{src:"assets/img/Rectangle 645.png",alt:"slide"}],n=[{src:"./assets/img/Ellipse 264.svg",alt:"dot"}];let s,a=[];(async()=>{try{const t=await fetch("https://673470a4a042ab85d11a2d4a.mockapi.io/products");s=await t.json(),d(s)}catch(t){console.log("Ошибка при получении данных",t)}})(),document.querySelector(".textLinks").innerHTML=["продукты","цвета","вдохновение","советы","найти магазин"].map((t=>`<li>\n      <a href="#">${t}</a>\n    </li>`)).join(""),document.querySelector(".iconLinks").innerHTML=[{label:"Поиск",src:"assets/img/search.svg",alt:"search"},{label:"Профиль",src:"assets/img/profile.svg",alt:"profile"},{label:"Избранное",src:"assets/img/heart.svg",alt:"heart"}].map((t=>`<li><img aria-label="${t.label}" src="${t.src}" alt="${t.alt}" /></li>`)).join(""),document.querySelector(".slider").innerHTML=e.map((t=>`<img class="sliderSlide" src="${t.src}" alt="${t.alt}" />`)).join(""),document.querySelector(".arrowContainer").innerHTML=[{src:"assets/img/chevron-left.svg",alt:"leftArrow"},{src:"assets/img/chevron-right.svg",alt:"rightArrow"}].map((t=>`<button class="sliderButton"><img class="slide" src="${t.src}" alt="${t.alt}" /></button>`)).join("");const c=document.querySelector(".arrowContainer .sliderButton:nth-child(1)"),i=document.querySelector(".arrowContainer .sliderButton:nth-child(2)");let r=0;function l(t){const e=document.querySelectorAll(".sliderSlide"),n=document.querySelector(".slider"),s=e.length;t<0&&(t=s-1),t>=s&&(t=0),n.style.transform=`translateX(-${100*t}%)`,r=t,document.querySelectorAll(".dot").forEach(((t,e)=>{t.classList.toggle("active",e===r)}))}c.addEventListener("click",(()=>{l(r-1)})),i.addEventListener("click",(()=>{l(r+1)})),document.querySelector(".pagination").innerHTML=e.map(((t,e)=>`<img class="dot ${e===r&&"active"}" src="${n[0].src}" alt="dot" />`)).join(""),document.querySelector(".slideSideText").innerHTML=t.map(((e,n)=>`<span>${e}</span> ${n<t.length-1?'<img src="assets/img/Ellipse 264.svg"/>':""}`)).join(""),document.querySelector(".sidebarToggleContent").innerHTML=["новинки","есть в наличии","контрактные","эксклюзивные","распродажа"].map(((t,e)=>`<div class="sidebarSliderItem">\n\t\t\t\t<input type="checkbox" id="toggle${e}" class="toggle"/>\n\t\t\t\t<label for="toggle${e}"><span class="toggleWord">${t}</span></label>\n\t\t\t</div>`)).join("");const o=document.querySelector(".mainSection"),d=t=>{o.innerHTML=t.map((t=>`<div class="productCartContainer">\n\t\t\t<div class="productCart" data-id="${t.id}" data-quantity="${t.quantity}">\n\t\t\t\t<div class="productImageContainer">\n\t\t\t\t\t<img class="productImage" src="${t.image}" alt="${t.name}" />\n\t\t\t\t</div>\n\t\t\t\t<div class="productInfo">\n\t\t\t\t\t<h3 class="productName">${t.name}</h3>\n\t\t\t\t\t<div class="priceAndButton">\n\t\t\t\t\t\t<p class="productPrice">${t.price} ₽</p>\n\t\t\t\t\t\t<button class="addProduct">\n\t\t\t\t\t\t\t<img src="assets/img/plus.svg" alt="plus"/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`)).join("")};let m;document.getElementById("modalOptions").innerHTML=[{text:"сначала дорогие",sortValue:"highPriceFirst"},{text:"сначала недорогие",sortValue:"lowPriceFirst"},{text:"сначала популярные",sortValue:"popularFirst"},{text:"сначала новые",sortValue:"newFirst"}].map((t=>`<li class="modalOption" data-sortValue="${t.sortValue}">${t.text}</li>`)).join("");const u=document.getElementById("sortTextButton"),g=document.getElementById("modal"),p=document.getElementById("modalOptions"),y=document.getElementById("modalBackground"),I=(t,e)=>{switch(t){case"open":g.style.height="192px",y.style.opacity="1",y.style.zIndex="15";break;case"close":e&&(m=e.target.getAttribute("data-sortValue"),optionName=e.target.textContent),g.style.height="",y.style.opacity="0",y.style.zIndex="-1",E.style.width="0px",f.style.height="0px",v(m,optionName)}};u.addEventListener("click",(()=>I("open"))),p.addEventListener("click",(t=>I("close",t))),y.addEventListener("click",(()=>I("close")));const v=(t,e)=>{switch(t){case"highPriceFirst":d([...s].sort(((t,e)=>e.price-t.price)));break;case"lowPriceFirst":d([...s].sort(((t,e)=>t.price-e.price)))}u.innerHTML=`${e}<img src="assets/img/Frame 10.svg" />`},h=document.getElementById("openCart"),$=document.getElementById("openCartMobile"),E=document.getElementById("cart"),b=(document.querySelector(".addProduct"),document.getElementById("itemsCount"),document.getElementById("closeCartButton"));h.addEventListener("click",(()=>{E.style.width="600px",y.style.opacity="1",y.style.zIndex="15"})),$.addEventListener("click",(()=>{E.style.width="100vw",y.style.opacity="1",y.style.zIndex="15"})),b.addEventListener("click",(()=>{E.style.width="0px",y.style.opacity="0",y.style.zIndex="-1"}));const x=document.getElementById("cartContentItems"),q=()=>{C(),S(),x.innerHTML=a.map((t=>{const e=1==t.quantity&&"disabled";return`<li class="cartItem" data-id="${t.id}">\n\t\t\t\t<img class="cartItemImage" src="${t.image}" alt="item" />\n\t\t\t\t<div class="cartItemInfo">\n\t\t\t\t\t<p class="cartItemName">${t.name}</p>\n\t\t\t\t\t<p class="cartItemPrice">${t.price}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="cartItemCount">\n\t\t\t\t\t<button class="cartItemCountMinus ${e}">\n\t\t\t\t\t\t<img src="assets/img/minus.svg" alt="minus" />\n\t\t\t\t\t</button>\n\t\t\t\t\t<p class="cartItemCountQuantity">${t.quantity}</p>\n\t\t\t\t\t<button class="cartItemCountPlus">\n\t\t\t\t\t\t<img src="assets/img/plus.svg" alt="plus" />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<button class="cartItemDelete">\n\t\t\t\t\t<img src="assets/img/x.svg" alt="delete" />\n\t\t\t\t</button>\n\t\t\t</li>`})).join("")};x.addEventListener("click",(t=>{const e=t.target.closest(".cartItemCountMinus"),n=t.target.closest(".cartItemCountPlus"),s=t.target.closest(".cartItemDelete"),c=t.target.closest(".cartItem").dataset.id;if(e)L(c,-1);else if(n)L(c,1);else if(s){const t=a.findIndex((t=>t.id===c));s&&-1!==t&&a.splice(t,1)}q()}));const L=(t,e)=>{const n=a.find((e=>e.id===t));if(n){const t=parseInt(n.quantity)+parseInt(e);n.quantity=t>0?t.toString():"1"}};o.addEventListener("click",(t=>{const e=t.target.closest(".addProduct");if(e){const t=e.closest(".productCart"),n=t.dataset.id,s=parseInt(t.dataset.quantity),c=t.querySelector(".productName").textContent,i=t.querySelector(".productPrice").textContent,r=t.querySelector(".productImage").src;if(a.find((t=>t.id===n)))L(n,s);else{const t={id:n,name:c,price:i,image:r,quantity:s.toString()};a.push(t)}q()}})),document.getElementById("itemsCountDelete").addEventListener("click",(()=>{a=[],q()}));const C=()=>{const t=document.getElementById("itemsCount"),e=a.reduce(((t,e)=>parseInt(t)+parseInt(e.quantity)),0),n=document.getElementById("openCart"),s=document.getElementById("openCartMobile");t.innerText=(t=>{const e=t%10;return 1===e&&11!==t?`${t} товар`:e>=2&&e<=4&&(t<10||t>20)?`${t} товара`:`${t} товаров`})(e),n.innerText=e,s.innerText=e},S=()=>{const t=document.getElementById("cartTotalPrice"),e=a.reduce(((t,e)=>t+parseFloat(e.price)*parseInt(e.quantity)),0),n=new Intl.NumberFormat("ru-RU").format(e);t.innerText=`${n} ₽`},B=document.querySelector(".burgerMenu"),f=document.querySelector(".sidebar");B.addEventListener("click",(()=>{f.style.height="318px",y.style.opacity="1",y.style.zIndex="15"})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".sideTextMobile").innerHTML=t.map(((e,n)=>`<span>${e}</span> ${n<t.length-1?'<img src="assets/img/Ellipse 47.svg"/>':""}`)).join("")}))})();